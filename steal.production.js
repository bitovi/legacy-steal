/*
 *  steal v0.1.0
 *  
 *  Copyright (c) 2014 Bitovi; Licensed MIT
 */
/*
 *  ES6 Promises shim from when.js, Copyright (c) 2010-2014 Brian Cavalier, John Hann, MIT License
 */
!function(a){function b(a){for(var b=0;b<a.length;b++)[].lastIndexOf.call(a,a[b])!=b&&a.splice(b--,1);return a}var c=function(a){return a.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():""})},d=function(a,b){var c,d;if("number"==typeof a.length&&a.length-1 in a)for(c=0,d=a.length;d>c;c++)b.call(a[c],a[c],c,a);else for(c in a)a.hasOwnProperty(c)&&b.call(a[c],a[c],c,a);return a},e=function(a){return"string"==typeof a},f=function(a,b){return d(b,function(b,c){a[c]=b}),a},g=function(a){var b=a.lastIndexOf("/");return-1!==b?a.substr(0,b):a},h=function(a){return a[a.length-1]},i=function(a){var b=a.lastIndexOf("/"),c=(-1==b?a:a.substr(b+1)).match(/^[\w-\s\.]+/);return c?c[0]:""},j=function(a){var b=i(a),c=b.lastIndexOf(".");return-1!==c?b.substr(c+1):""},k=function(a){var b=i(a),c=j(a);return"/"===a[a.length-1]?a+i(a.substr(0,a.length-1)):/^(\w+(?:s)?:\/\/|\.|file|\/)/.test(a)||-1!==b.indexOf(".")?"js"===c?a.substr(0,a.lastIndexOf(".")):a:a+"/"+b},l=function(b){var j,l,m,n=function(){var a=arguments,b=function(){var b,c=[];d(a,function(a){e(a)?c.push(n.System["import"](k(a))):"function"==typeof a&&(b=a)});var f=Promise.all(c);return b?f.then(function(a){return b&&b.apply(null,a)}):f};return"production"===n.config().env?b():j.then(b,b)};n.System=b;var o={env:"development"};n.config=function(a){if(e(a)){var b=a;if(!(arguments.length>=2)){var c=q[b];return c&&c.get?c.get():o[b]}}else{if("object"!=typeof a){var g={};return d(q,function(a,b){a.get&&(g[b]=a.get())}),f(g,o)}a=f({},a),d(q,function(b,c){if(b.set&&a[c]){var d=b.set(a[c]);void 0!==d&&(o[c]=d),delete a[c]}}),f(o,a)}};var p=function(a){return{get:function(){return n.System[a]},set:function(b){n.System[a]="object"==typeof b&&"object"==typeof n.System[a]?f(n.System[a]||{},b||{}):b}}},q={env:{set:function(a){return r(),a}},root:p("baseURL"),config:{set:function(a){var c=i(a),d=g(a);b.paths.stealconfig=c,q.root.set((d===a?".":d)+"/")}},paths:p("paths"),map:p("map"),startId:{set:function(a){q.main.set(k(a))},get:function(){return b.main}},main:{get:p("main").get,set:function(a){b.main=a,r()}},meta:p("meta")},r=function(){if("production"===o.env&&b.main){var a=b.main,c=b.bundlesPath||"bundles/",d=c+i(a);b.meta[d]={format:"amd"},b.bundles[d]=[a]}},s=function(){var a,e,f,g,i,j={},k=document.getElementsByTagName("script"),l=k[k.length-1];if(l){a=l.src.split("?"),e=a.shift(),f=a.join("?"),a=f.split(","),e.indexOf("steal.production")>-1&&(j.env="production"),g=a[0],g&&(j.startId=g),i=a[1],i&&(j.env=i),a=e.split("/");var m=a.pop();0!==m.indexOf("steal")||b.paths["steal/dev/dev"]||(j.paths={"steal/*":a.join("/")+"/*.js","@traceur":a.slice(0,-1).join("/")+"/traceur/traceur.js"}),"steal"===h(a)&&(a.pop(),"bower_components"===h(a)&&a.pop());var n=a.join("/");j.root=n+"/",d(l.attributes,function(a){var b=c(0===a.nodeName.indexOf("data-")?a.nodeName.replace("data-",""):a.nodeName);j[b]=a.value})}return j},t=function(){var a={};return"string"!=typeof __dirname||b.paths["steal/dev/dev"]||(a.paths={"steal/*":__dirname+"/*.js","@traceur":__dirname.split("/").slice(0,-1).join("/")+"/traceur/traceur.js"}),a};return n.startup=function(c){if(a.document)var f=s();else var f=t();b.map.css||(b.map.css="steal/css"),n.config(f);var g=n.config();d(g.executed||[],function(a,c){b.register(c,[],function(){})});var h=[];return g.startIds&&(h.push.apply(h,e(g.startIds)?[g.startIds]:g.startIds),g.startIds=h.slice(0)),"production"==g.env?m=n.System.import(n.System.main)["catch"](function(a){}):"development"==g.env?(j=n.System.import("stealconfig"),l=j.then(function(){return c&&n.config(c),n("steal/dev")},function(){return n("steal/dev")}),m=l.then(function(){return n.System.main?b.import(n.System.main):j}).then(function(){n.dev&&n.dev.log("app loaded successfully")},function(a){})):void 0},n},m=/(?:^\s*|[}{\(\);,\n\?\&]\s*)steal\s*\(\s*((?:"[^"]+"\s*,|'[^']+'\s*,\s*)*)/,n=function(a){function c(b,c){for(var d=(c.metadata,[]),e=0;e<b.length;e++){var f=a.get(b[e]);if(f.__useDefault)f=f["default"];else if(!f.__esModule){var g={__esModule:!0};for(var h in f)g[h]=f[h];f=g}d[e]=f}var f,i;return{deps:d,module:f||i&&{exports:i}}}return a.formats.unshift("steal"),a.format.steal={detect:function(a){return!!a.source.match(m)},deps:function(c){var d=a.global,e=[],f=c.metadata,g=d.steal;return d.steal=function(){for(var a=0;a<arguments.length;a++)"string"==typeof arguments[a]?e.push(arguments[a]):f.factory=arguments[a]},a.__exec(c),d.steal=g,e=e||[],e=b(e,f),d.define=void 0,f.deps=e,e},execute:function(b,d){if(d.metadata.factory){var e=c(b,d);return d.metadata.factory.apply(a.global,e.deps)||e.module&&e.module.exports}},normalize:function(a,b,c,d){return d(k(a,this),b,c)}},a};if("undefined"!=typeof System&&n(System),"undefined"!=typeof window)window.steal=l(System),window.steal.startup(),window.steal.addFormat=n;else{var o=l(System);o.System=System,o.dev=require("./dev/dev.js"),o.clone=l,module.exports=o,a.steal=o,a.steal.addFormat=n}}("undefined"==typeof window?global:window);